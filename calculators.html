<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medora | Medical Calculators</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- =================================================================
     MEDORA MEDICAL CALCULATORS
     SINGLE FILE ‚Äì SPLIT INTO 4 TEXT PARTS (LINE-BASED ONLY)
     PART 1 / 4
================================================================= -->

<style>

/* ================================================================
   ROOT VARIABLES ‚Äì MEDICAL DARK THEME
================================================================ */
:root {
  --bg-main: #020617;
  --bg-panel: #0b132b;
  --bg-card: #1c2541;
  --primary: #3a86ff;
  --accent: #38bdf8;
  --danger: #ef4444;
  --warning: #facc15;
  --success: #22c55e;
  --text-main: #e5e7eb;
  --text-muted: #94a3b8;
  --border-soft: rgba(255,255,255,0.08);
}

/* ================================================================
   RESET & BASE STYLES
================================================================ */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: radial-gradient(circle at top, #1c2541, #020617);
  color: var(--text-main);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ================================================================
   MAIN APP CONTAINER
================================================================ */
.app {
  width: 1100px;
  max-width: 96%;
  background: linear-gradient(180deg, #1c2541, #0b132b);
  border-radius: 24px;
  padding: 32px;
  border: 1px solid var(--border-soft);
  box-shadow: 0 40px 90px rgba(0,0,0,0.65);
}

/* ================================================================
   HEADER
================================================================ */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 32px;
}

.brand {
  display: flex;
  align-items: center;
  gap: 14px;
}

.brand-icon {
  width: 48px;
  height: 48px;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
}

.brand-text strong {
  font-size: 22px;
  letter-spacing: 0.3px;
}

.brand-text span {
  font-size: 12px;
  color: var(--text-muted);
}

/* ================================================================
   LAYOUT GRID
================================================================ */
.main {
  display: grid;
  grid-template-columns: 340px 1fr;
  gap: 30px;
}

/* ================================================================
   SIDEBAR
================================================================ */
.sidebar {
  background: var(--bg-panel);
  border-radius: 20px;
  padding: 22px;
  border: 1px solid var(--border-soft);
}

.sidebar h3 {
  margin-top: 0;
  font-size: 16px;
  margin-bottom: 16px;
  color: var(--text-main);
}

/* ================================================================
   CALCULATOR LIST
================================================================ */
.calc-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.calc-item {
  padding: 13px 15px;
  border-radius: 14px;
  background: transparent;
  border: 1px solid var(--border-soft);
  color: var(--text-main);
  cursor: pointer;
  transition: all 0.25s ease;
  font-size: 14px;
}

.calc-item:hover {
  background: rgba(58,134,255,0.15);
}

.calc-item.active {
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #020617;
  font-weight: 600;
}

/* ================================================================
   CONTENT PANEL
================================================================ */
.content {
  background: var(--bg-panel);
  border-radius: 20px;
  padding: 26px;
  border: 1px solid var(--border-soft);
  display: flex;
  flex-direction: column;
}

/* ================================================================
   CONTENT HEADER
================================================================ */
.content-header h2 {
  margin: 0;
  font-size: 24px;
}

.content-header p {
  margin-top: 6px;
  font-size: 14px;
  color: var(--text-muted);
}

/* ================================================================
   FORM GRID
================================================================ */
.form {
  margin-top: 28px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group.full {
  grid-column: span 2;
}

.form-group label {
  font-size: 13px;
  margin-bottom: 6px;
  color: var(--text-muted);
}

.form-group input,
.form-group select {
  padding: 11px 13px;
  border-radius: 12px;
  border: none;
  background: #24355c;
  color: white;
  font-size: 14px;
}

/* ================================================================
   ACTION BUTTONS
================================================================ */
.actions {
  margin-top: auto;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

.actions button {
  padding: 12px 20px;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  font-size: 14px;
}

.btn-calc {
  background: linear-gradient(135deg, var(--accent), var(--primary));
  color: #020617;
  font-weight: bold;
}

.btn-reset {
  background: transparent;
  color: var(--text-muted);
  border: 1px solid var(--border-soft);
}

/* ================================================================
   RESULT BOX
================================================================ */
.result-box {
  margin-top: 26px;
  padding: 20px;
  border-radius: 16px;
  background: #020617;
  border: 1px solid var(--border-soft);
  display: none;
}

.result-box h4 {
  margin-top: 0;
}

.result-value {
  font-size: 26px;
  margin-top: 12px;
}

/* ================================================================
   FOOTER
================================================================ */
.footer {
  margin-top: 28px;
  text-align: center;
}

.footer button {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 13px;
}

</style>
</head>

<body>

<div class="app">

  <div class="header">
    <div class="brand">
      <div class="brand-icon">üßÆ</div>
      <div class="brand-text">
        <strong>Medora</strong><br>
        <span>Advanced Medical Calculators</span>
      </div>
    </div>
  </div>

  <div class="main">

    <div class="sidebar">
      <h3>Calculators</h3>
      <div class="calc-list" id="calcList">
        <div class="calc-item active" data-calc="bmi">BMI</div>
        <div class="calc-item" data-calc="bsa">BSA</div>
        <div class="calc-item" data-calc="crcl">Creatinine Clearance</div>
        <div class="calc-item" data-calc="egfr">eGFR</div>
        <div class="calc-item" data-calc="calcium">Corrected Calcium</div>
        <div class="calc-item" data-calc="parkland">Parkland Formula</div>
        <div class="calc-item" data-calc="aniongap">Anion Gap</div>
        <div class="calc-item" data-calc="map">MAP</div>
        <div class="calc-item" data-calc="osm">Osmolarity</div>
        <div class="calc-item" data-calc="ldl">LDL</div>
      </div>
    </div>

    <div class="content">

      <div class="content-header">
        <h2 id="calcTitle">BMI</h2>
        <p id="calcDesc">Body Mass Index calculation.</p>
      </div>

      <div class="form" id="dynamicForm">
        <!-- dynamic inputs continue here -->      </div>

      <!-- ACTION BUTTONS -->
      <div class="actions">
        <button class="btn-reset" id="resetBtn">Reset</button>
        <button class="btn-calc" id="calcBtn">Calculate</button>
      </div>

      <!-- RESULT -->
      <div class="result-box" id="resultBox">
        <h4>Result</h4>
        <div class="result-value" id="resultValue">‚Äî</div>
      </div>

    </div>
  </div>

  <div class="footer">
    <button onclick="location.href='dashboard.html'">‚Üê Back to Dashboard</button>
  </div>

</div>

<script>
/* ================================================================
   CALCULATOR DEFINITIONS (EXTENSIBLE REGISTRY)
================================================================ */

/*
  NOTE:
  - This registry holds ALL calculators.
  - Each calculator defines:
    title, description, fields[], calculate()
  - More calculators will be added in PART 3.
*/

const CALCULATORS = {

  /* ============================================================
     BMI
  ============================================================ */
  bmi: {
    title: "Body Mass Index (BMI)",
    description: "Weight-to-height ratio used to classify body mass.",
    fields: [
      { id: "weight", label: "Weight (kg)", type: "number" },
      { id: "height", label: "Height (cm)", type: "number" }
    ],
    calculate(d) {
      const h = d.height / 100;
      const bmi = d.weight / (h * h);
      return bmi.toFixed(2);
    }
  },

  /* ============================================================
     BSA ‚Äì Body Surface Area (Mosteller)
  ============================================================ */
  bsa: {
    title: "Body Surface Area (BSA)",
    description: "Mosteller formula used for drug dosing.",
    fields: [
      { id: "weight", label: "Weight (kg)", type: "number" },
      { id: "height", label: "Height (cm)", type: "number" }
    ],
    calculate(d) {
      const bsa = Math.sqrt((d.height * d.weight) / 3600);
      return bsa.toFixed(2) + " m¬≤";
    }
  },

  /* ============================================================
     Creatinine Clearance ‚Äì Cockcroft‚ÄìGault
  ============================================================ */
  crcl: {
    title: "Creatinine Clearance",
    description: "Cockcroft‚ÄìGault estimation of renal function.",
    fields: [
      { id: "age", label: "Age (years)", type: "number" },
      { id: "weight", label: "Weight (kg)", type: "number" },
      { id: "scr", label: "Serum Creatinine (mg/dL)", type: "number", step: "0.1" },
      { id: "sex", label: "Sex", type: "select", options: ["male", "female"] }
    ],
    calculate(d) {
      let crcl = ((140 - d.age) * d.weight) / (72 * d.scr);
      if (d.sex === "female") crcl *= 0.85;
      return crcl.toFixed(1) + " mL/min";
    }
  },

  /* ============================================================
     eGFR ‚Äì MDRD (Simplified)
  ============================================================ */
  egfr: {
    title: "eGFR (MDRD)",
    description: "Estimated glomerular filtration rate.",
    fields: [
      { id: "age", label: "Age (years)", type: "number" },
      { id: "scr", label: "Serum Creatinine (mg/dL)", type: "number", step: "0.1" },
      { id: "sex", label: "Sex", type: "select", options: ["male", "female"] }
    ],
    calculate(d) {
      let gfr = 175 * Math.pow(d.scr, -1.154) * Math.pow(d.age, -0.203);
      if (d.sex === "female") gfr *= 0.742;
      return gfr.toFixed(1) + " mL/min/1.73m¬≤";
    }
  },

  /* ============================================================
     Corrected Calcium
  ============================================================ */
  calcium: {
    title: "Corrected Calcium",
    description: "Corrects calcium level based on albumin.",
    fields: [
      { id: "calcium", label: "Total Calcium (mg/dL)", type: "number", step: "0.1" },
      { id: "albumin", label: "Albumin (g/dL)", type: "number", step: "0.1" }
    ],
    calculate(d) {
      const corrected = d.calcium + 0.8 * (4 - d.albumin);
      return corrected.toFixed(2) + " mg/dL";
    }
  },

  /* ============================================================
     Parkland Formula
  ============================================================ */
  parkland: {
    title: "Parkland Formula",
    description: "Fluid resuscitation calculation for burns.",
    fields: [
      { id: "weight", label: "Weight (kg)", type: "number" },
      { id: "tbsa", label: "TBSA Burn (%)", type: "number" }
    ],
    calculate(d) {
      const total = 4 * d.weight * d.tbsa;
      return `
        Total fluids: ${total} mL<br>
        First 8 hours: ${total / 2} mL<br>
        Next 16 hours: ${total / 2} mL
      `;
    }
  },

  /* ============================================================
     Anion Gap
  ============================================================ */
  aniongap: {
    title: "Anion Gap",
    description: "Na ‚àí (Cl + HCO‚ÇÉ)",
    fields: [
      { id: "na", label: "Sodium (mEq/L)", type: "number" },
      { id: "cl", label: "Chloride (mEq/L)", type: "number" },
      { id: "hco3", label: "Bicarbonate (mEq/L)", type: "number" }
    ],
    calculate(d) {
      const ag = d.na - (d.cl + d.hco3);
      return ag + " mEq/L";
    }
  },

  /* ============================================================
     Mean Arterial Pressure
  ============================================================ */
  map: {
    title: "Mean Arterial Pressure",
    description: "MAP = (SBP + 2√óDBP) / 3",
    fields: [
      { id: "sbp", label: "Systolic BP (mmHg)", type: "number" },
      { id: "dbp", label: "Diastolic BP (mmHg)", type: "number" }
    ],
    calculate(d) {
      const map = (d.sbp + 2 * d.dbp) / 3;
      return map.toFixed(1) + " mmHg";
    }
  },

  /* ============================================================
     Osmolarity
  ============================================================ */
  osm: {
    title: "Serum Osmolarity",
    description: "Calculated serum osmolarity.",
    fields: [
      { id: "na", label: "Sodium (mEq/L)", type: "number" },
      { id: "glucose", label: "Glucose (mg/dL)", type: "number" },
      { id: "bun", label: "BUN (mg/dL)", type: "number" }
    ],
    calculate(d) {
      const osm = 2 * d.na + d.glucose / 18 + d.bun / 2.8;
      return osm.toFixed(1) + " mOsm/kg";
    }
  },

  /* ============================================================
     LDL ‚Äì Friedewald Formula
  ============================================================ */
  ldl: {
    title: "LDL Cholesterol",
    description: "Friedewald equation.",
    fields: [
      { id: "tc", label: "Total Cholesterol (mg/dL)", type: "number" },
      { id: "hdl", label: "HDL (mg/dL)", type: "number" },
      { id: "tg", label: "Triglycerides (mg/dL)", type: "number" }
    ],
    calculate(d) {
      const ldl = d.tc - d.hdl - d.tg / 5;
      return ldl.toFixed(1) + " mg/dL";
    }
  }

}; // END REGISTRY (continues in PART 3)

/* ================================================================
   STATE & DOM REFERENCES
================================================================ */

let activeCalc = "bmi";

const calcList = document.getElementById("calcList");
const form = document.getElementById("dynamicForm");
const titleEl = document.getElementById("calcTitle");
const descEl = document.getElementById("calcDesc");
const resultBox = document.getElementById("resultBox");
const resultValue = document.getElementById("resultValue");
const calcBtn = document.getElementById("calcBtn");
const resetBtn = document.getElementById("resetBtn");

/* ================================================================
   RENDER CALCULATOR (UI BUILDER)
================================================================ */

function renderCalculator(key) {
  activeCalc = key;
  const calc = CALCULATORS[key];

  document.querySelectorAll(".calc-item").forEach(item => {
    item.classList.toggle("active", item.dataset.calc === key);
  });

  titleEl.textContent = calc.title;
  descEl.textContent = calc.description;

  form.innerHTML = "";

  calc.fields.forEach(field => {
    const div = document.createElement("div");
    div.className = "form-group";

    const label = document.createElement("label");
    label.textContent = field.label;

    let input;
    if (field.type === "select") {
      input = document.createElement("select");
      field.options.forEach(opt => {
        const o = document.createElement("option");
        o.value = opt;
        o.textContent = opt;
        input.appendChild(o);
      });
    } else {
      input = document.createElement("input");
      input.type = field.type;
      if (field.step) input.step = field.step;
    }

    input.id = field.id;
    div.appendChild(label);
    div.appendChild(input);
    form.appendChild(div);
  });

  resultBox.style.display = "none";
}

/* ================================================================
   EVENTS (CONTINUES IN PART 3)
================================================================ */
calcList.onclick = e => {
  const item = e.target.closest(".calc-item");
  if (!item) return;
  renderCalculator(item.dataset.calc);
};

calcBtn.onclick = () => {
  const calc = CALCULATORS[activeCalc];
  const data = {};

  for (let field of calc.fields) {
    const el = document.getElementById(field.id);
    if (!el || el.value === "") {
      alert("Please fill all fields");
      return;
    }
    data[field.id] =
      field.type === "number" ? Number(el.value) : el.value;
  }

  const result = calc.calculate(data);
  resultValue.innerHTML = result;
  resultBox.style.display = "block";
};

resetBtn.onclick = () => {
  renderCalculator(activeCalc);
};

CALCULATORS.childpugh = {
  title: "Child-Pugh Score",
  description: "Assessment of liver disease severity.",
  fields: [
    { id: "bilirubin", label: "Bilirubin (mg/dL)", type: "number" },
    { id: "albumin", label: "Albumin (g/dL)", type: "number" },
    { id: "inr", label: "INR", type: "number" },
    { id: "ascites", label: "Ascites", type: "select", options: ["none", "mild", "severe"] },
    { id: "encephalopathy", label: "Encephalopathy", type: "select", options: ["none", "grade1-2", "grade3-4"] }
  ],
  calculate(d) {
    let score = 0;
    score += d.bilirubin < 2 ? 1 : d.bilirubin <= 3 ? 2 : 3;
    score += d.albumin > 3.5 ? 1 : d.albumin >= 2.8 ? 2 : 3;
    score += d.inr < 1.7 ? 1 : d.inr <= 2.3 ? 2 : 3;
    score += d.ascites === "none" ? 1 : d.ascites === "mild" ? 2 : 3;
    score += d.encephalopathy === "none" ? 1 : d.encephalopathy === "grade1-2" ? 2 : 3;
    const cls = score <= 6 ? "Class A" : score <= 9 ? "Class B" : "Class C";
    return `Score: ${score}<br>${cls}`;
  }
};

CALCULATORS.meld = {
  title: "MELD Score",
  description: "Model for End-Stage Liver Disease.",
  fields: [
    { id: "bilirubin", label: "Bilirubin (mg/dL)", type: "number" },
    { id: "inr", label: "INR", type: "number" },
    { id: "creatinine", label: "Creatinine (mg/dL)", type: "number" }
  ],
  calculate(d) {
    const meld =
      3.78 * Math.log(d.bilirubin) +
      11.2 * Math.log(d.inr) +
      9.57 * Math.log(d.creatinine) +
      6.43;
    return Math.round(meld);
  }
};

CALCULATORS.curb65 = {
  title: "CURB-65",
  description: "Pneumonia severity score.",
  fields: [
    { id: "confusion", label: "Confusion", type: "select", options: ["no", "yes"] },
    { id: "urea", label: "Urea > 7 mmol/L", type: "select", options: ["no", "yes"] },
    { id: "rr", label: "RR ‚â• 30", type: "select", options: ["no", "yes"] },
    { id: "bp", label: "Low BP", type: "select", options: ["no", "yes"] },
    { id: "age", label: "Age ‚â• 65", type: "select", options: ["no", "yes"] }
  ],
  calculate(d) {
    let score = 0;
    Object.values(d).forEach(v => v === "yes" && score++);
    return score;
  }
};
CALCULATORS.cha2ds2vasc = {
  title: "CHA‚ÇÇDS‚ÇÇ-VASc",
  description: "Stroke risk in atrial fibrillation.",
  fields: [
    { id: "age75", label: "Age ‚â• 75", type: "select", options: ["no", "yes"] },
    { id: "age65", label: "Age 65‚Äì74", type: "select", options: ["no", "yes"] },
    { id: "female", label: "Female Sex", type: "select", options: ["no", "yes"] },
    { id: "htn", label: "Hypertension", type: "select", options: ["no", "yes"] },
    { id: "dm", label: "Diabetes", type: "select", options: ["no", "yes"] },
    { id: "stroke", label: "Stroke/TIA", type: "select", options: ["no", "yes"] },
    { id: "vasc", label: "Vascular Disease", type: "select", options: ["no", "yes"] }
  ],
  calculate(d) {
    let score = 0;
    if (d.age75 === "yes") score += 2;
    else if (d.age65 === "yes") score += 1;
    if (d.female === "yes") score += 1;
    if (d.htn === "yes") score += 1;
    if (d.dm === "yes") score += 1;
    if (d.stroke === "yes") score += 2;
    if (d.vasc === "yes") score += 1;
    return score;
  }
};

CALCULATORS.wells_dvt = {
  title: "Wells Score (DVT)",
  description: "Pretest probability for DVT.",
  fields: [
    { id: "cancer", label: "Active cancer", type: "select", options: ["no", "yes"] },
    { id: "paralysis", label: "Paralysis/immobilization", type: "select", options: ["no", "yes"] },
    { id: "tenderness", label: "Localized tenderness", type: "select", options: ["no", "yes"] },
    { id: "swelling", label: "Leg swelling", type: "select", options: ["no", "yes"] },
    { id: "collateral", label: "Collateral veins", type: "select", options: ["no", "yes"] },
    { id: "alt", label: "Alternative diagnosis", type: "select", options: ["yes", "no"] }
  ],
  calculate(d) {
    let score = 0;
    Object.entries(d).forEach(([k, v]) => {
      if (k === "alt" && v === "yes") score -= 2;
      else if (v === "yes") score += 1;
    });
    return score;
  }
};

CALCULATORS.nihss = {
  title: "NIH Stroke Scale (Simplified)",
  description: "Neurological deficit severity.",
  fields: [
    { id: "loc", label: "LOC", type: "number" },
    { id: "gaze", label: "Gaze", type: "number" },
    { id: "motor", label: "Motor", type: "number" },
    { id: "speech", label: "Speech", type: "number" }
  ],
  calculate(d) {
    const score = d.loc + d.gaze + d.motor + d.speech;
    return score;
  }
};

/* ================================================================
   SIDEBAR EXTENSION (ADD NEW ITEMS)
================================================================ */

const extraSidebarItems = [
  { key: "childpugh", label: "Child-Pugh" },
  { key: "meld", label: "MELD" },
  { key: "cha2ds2vasc", label: "CHA‚ÇÇDS‚ÇÇ-VASc" },
  { key: "curb65", label: "CURB-65" },
  { key: "wells_dvt", label: "Wells (DVT)" },
  { key: "nihss", label: "NIHSS" }
];

extraSidebarItems.forEach(item => {
  const div = document.createElement("div");
  div.className = "calc-item";
  div.dataset.calc = item.key;
  div.textContent = item.label;
  calcList.appendChild(div);
});

/* ================================================================
   SAFETY INIT
================================================================ */

if (!CALCULATORS[activeCalc]) {
  activeCalc = Object.keys(CALCULATORS)[0];
}

renderCalculator(activeCalc);

</script>

</body>
</html>

