<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medora | Medical Calculators</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg-main:#020617;
  --bg-panel:#0b132b;
  --bg-card:#111827;
  --primary:#3a86ff;
  --accent:#38bdf8;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:rgba(255,255,255,.08);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Segoe UI",Arial,sans-serif;
  background:radial-gradient(circle at top,#1c2541,#020617);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.app{
  width:1200px;
  max-width:96%;
  background:linear-gradient(180deg,#1c2541,#0b132b);
  border-radius:26px;
  padding:34px;
  border:1px solid var(--border);
  box-shadow:0 40px 90px rgba(0,0,0,.6);
}

.header{
  display:flex;
  align-items:center;
  gap:16px;
  margin-bottom:30px;
}

.logo{
  width:48px;
  height:48px;
  border-radius:14px;
  background:linear-gradient(135deg,var(--primary),var(--accent));
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
}

.header strong{font-size:22px}
.header span{font-size:12px;color:var(--muted)}

.main{
  display:grid;
  grid-template-columns:360px 1fr;
  gap:30px;
}

.sidebar{
  background:var(--bg-panel);
  border-radius:22px;
  padding:22px;
  border:1px solid var(--border);
}

.sidebar h3{
  margin:0 0 16px;
  font-size:16px;
}

.calc-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.calc-item{
  padding:14px 16px;
  border-radius:14px;
  border:1px solid var(--border);
  cursor:pointer;
  transition:.25s;
}

.calc-item:hover{
  background:rgba(58,134,255,.15);
}

.calc-item.active{
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:#020617;
  font-weight:600;
}

.content{
  background:var(--bg-panel);
  border-radius:22px;
  padding:28px;
  border:1px solid var(--border);
  display:flex;
  flex-direction:column;
}

.content h2{margin:0;font-size:26px}
.content p{margin:6px 0 0;color:var(--muted)}

.form{
  margin-top:26px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}

.form-group{display:flex;flex-direction:column}
.form-group label{font-size:13px;margin-bottom:6px;color:var(--muted)}
.form-group input,.form-group select{
  padding:12px 14px;
  border-radius:12px;
  border:none;
  background:#24355c;
  color:white;
}

.actions{
  margin-top:auto;
  display:flex;
  justify-content:flex-end;
  gap:14px;
}

.actions button{
  padding:12px 22px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-size:14px;
}

.btn-calc{
  background:linear-gradient(135deg,var(--accent),var(--primary));
  color:#020617;
  font-weight:700;
}

.btn-reset{
  background:transparent;
  color:var(--muted);
  border:1px solid var(--border);
}

.result{
  margin-top:26px;
  padding:20px;
  border-radius:16px;
  background:#020617;
  border:1px solid var(--border);
  display:none;
  font-size:24px;
}

.footer{
  margin-top:26px;
  text-align:center;
}

.footer button{
  background:none;
  border:none;
  color:var(--muted);
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app">

<div class="header">
  <div class="logo">üßÆ</div>
  <div>
    <strong>Medora</strong><br>
    <span>Medical Calculators</span>
  </div>
</div>

<div class="main">

<div class="sidebar">
<h3>Calculators</h3>
<div class="calc-list" id="calcList">

<div class="calc-item active" data-calc="bmi">BMI</div>
<div class="calc-item" data-calc="bsa">BSA</div>
<div class="calc-item" data-calc="crcl">Creatinine Clearance</div>
<div class="calc-item" data-calc="egfr">eGFR (MDRD)</div>
<div class="calc-item" data-calc="calcium">Corrected Calcium</div>
<div class="calc-item" data-calc="parkland">Parkland Formula</div>
<div class="calc-item" data-calc="aniongap">Anion Gap</div>
<div class="calc-item" data-calc="map">Mean Arterial Pressure</div>
<div class="calc-item" data-calc="sodium">Sodium Correction</div>
<div class="calc-item" data-calc="osm">Osmolarity</div>
<div class="calc-item" data-calc="ldl">LDL</div>
<div class="calc-item" data-calc="childpugh">Child-Pugh</div>
<div class="calc-item" data-calc="meld">MELD</div>
<div class="calc-item" data-calc="cha2ds2vasc">CHA‚ÇÇDS‚ÇÇ-VASc</div>
<div class="calc-item" data-calc="curb65">CURB-65</div>
<div class="calc-item" data-calc="wells">Wells Score</div>
<div class="calc-item" data-calc="apache">APACHE II</div>
<div class="calc-item" data-calc="nihss">NIHSS</div>

</div>
</div>

<div class="content">
<h2 id="title">BMI</h2>
<p id="desc">Body Mass Index</p>
<div class="form" id="form"></div>

<div class="actions">
  <button class="btn-reset" id="reset">Reset</button>
  <button class="btn-calc" id="calc">Calculate</button>
</div>

<div class="result" id="result"></div>
</div>

</div>

<div class="footer">
<button onclick="location.href='dashboard.html'">‚Üê Back to Dashboard</button>
</div>

</div>

     <script>
/* ============================================================
   MEDORA MEDICAL CALCULATORS
   CORE ENGINE ‚Äì PART 2 / 5
============================================================ */

/* ============================================================
   GLOBAL STATE
============================================================ */

let ACTIVE_CALCULATOR = "bmi";

/* ============================================================
   DOM REFERENCES
============================================================ */

const calcList   = document.getElementById("calcList");
const titleEl    = document.getElementById("title");
const descEl     = document.getElementById("desc");
const formEl     = document.getElementById("form");
const resultEl   = document.getElementById("result");
const calcBtn    = document.getElementById("calc");
const resetBtn   = document.getElementById("reset");

/* ============================================================
   UTILITIES
============================================================ */

function clearResult() {
  resultEl.style.display = "none";
  resultEl.innerHTML = "";
}

function showResult(html) {
  resultEl.innerHTML = html;
  resultEl.style.display = "block";
}

function createInput(field) {
  const wrapper = document.createElement("div");
  wrapper.className = "form-group";

  const label = document.createElement("label");
  label.textContent = field.label;

  let input;

  if (field.type === "select") {
    input = document.createElement("select");
    field.options.forEach(opt => {
      const o = document.createElement("option");
      o.value = opt.value;
      o.textContent = opt.label;
      input.appendChild(o);
    });
  } else {
    input = document.createElement("input");
    input.type = field.type || "number";
    if (field.step) input.step = field.step;
    if (field.placeholder) input.placeholder = field.placeholder;
  }

  input.id = field.id;

  wrapper.appendChild(label);
  wrapper.appendChild(input);

  return wrapper;
}

/* ============================================================
   FORM RENDERER
============================================================ */

function renderForm(calculator) {
  formEl.innerHTML = "";
  clearResult();

  calculator.fields.forEach(field => {
    const inputGroup = createInput(field);
    formEl.appendChild(inputGroup);
  });
}

/* ============================================================
   SIDEBAR NAVIGATION
============================================================ */

function setActiveSidebar(key) {
  document.querySelectorAll(".calc-item").forEach(item => {
    item.classList.toggle("active", item.dataset.calc === key);
  });
}

calcList.addEventListener("click", e => {
  const item = e.target.closest(".calc-item");
  if (!item) return;

  const key = item.dataset.calc;
  if (!CALCULATORS[key]) return;

  ACTIVE_CALCULATOR = key;
  setActiveSidebar(key);

  const calc = CALCULATORS[key];
  titleEl.textContent = calc.title;
  descEl.textContent  = calc.description;

  renderForm(calc);
});

/* ============================================================
   DATA COLLECTION & VALIDATION
============================================================ */

function collectData(calculator) {
  const data = {};

  for (let field of calculator.fields) {
    const el = document.getElementById(field.id);

    if (!el || el.value === "") {
      alert("Please fill all required fields");
      return null;
    }

    if (field.type === "select") {
      data[field.id] = el.value;
    } else {
      const value = Number(el.value);
      if (isNaN(value)) {
        alert("Invalid numeric value");
        return null;
      }
      data[field.id] = value;
    }
  }

  return data;
}

/* ============================================================
   BUTTON EVENTS (CALC / RESET)
============================================================ */

calcBtn.addEventListener("click", () => {
  const calc = CALCULATORS[ACTIVE_CALCULATOR];
  if (!calc) return;

  const data = collectData(calc);
  if (!data) return;

  const output = calc.calculate(data);
  showResult(output);
});

resetBtn.addEventListener("click", () => {
  const calc = CALCULATORS[ACTIVE_CALCULATOR];
  if (!calc) return;
  renderForm(calc);
});

/* ============================================================
   INITIAL RENDER
============================================================ */

document.addEventListener("DOMContentLoaded", () => {
  const initial = CALCULATORS[ACTIVE_CALCULATOR];
  if (!initial) return;

  setActiveSidebar(ACTIVE_CALCULATOR);
  titleEl.textContent = initial.title;
  descEl.textContent  = initial.description;
  renderForm(initial);
});

</script>
<script>
/* ============================================================
   MEDORA MEDICAL CALCULATORS
   CORE ENGINE ‚Äì PART 2 / 5
============================================================ */

/* ============================================================
   GLOBAL STATE
============================================================ */

let ACTIVE_CALCULATOR = "bmi";

/* ============================================================
   DOM REFERENCES
============================================================ */

const calcList   = document.getElementById("calcList");
const titleEl    = document.getElementById("title");
const descEl     = document.getElementById("desc");
const formEl     = document.getElementById("form");
const resultEl   = document.getElementById("result");
const calcBtn    = document.getElementById("calc");
const resetBtn   = document.getElementById("reset");

/* ============================================================
   UTILITIES
============================================================ */

function clearResult() {
  resultEl.style.display = "none";
  resultEl.innerHTML = "";
}

function showResult(html) {
  resultEl.innerHTML = html;
  resultEl.style.display = "block";
}

function createInput(field) {
  const wrapper = document.createElement("div");
  wrapper.className = "form-group";

  const label = document.createElement("label");
  label.textContent = field.label;

  let input;

  if (field.type === "select") {
    input = document.createElement("select");
    field.options.forEach(opt => {
      const o = document.createElement("option");
      o.value = opt.value;
      o.textContent = opt.label;
      input.appendChild(o);
    });
  } else {
    input = document.createElement("input");
    input.type = field.type || "number";
    if (field.step) input.step = field.step;
    if (field.placeholder) input.placeholder = field.placeholder;
  }

  input.id = field.id;

  wrapper.appendChild(label);
  wrapper.appendChild(input);

  return wrapper;
}

/* ============================================================
   FORM RENDERER
============================================================ */

function renderForm(calculator) {
  formEl.innerHTML = "";
  clearResult();

  calculator.fields.forEach(field => {
    const inputGroup = createInput(field);
    formEl.appendChild(inputGroup);
  });
}

/* ============================================================
   SIDEBAR NAVIGATION
============================================================ */

function setActiveSidebar(key) {
  document.querySelectorAll(".calc-item").forEach(item => {
    item.classList.toggle("active", item.dataset.calc === key);
  });
}

calcList.addEventListener("click", e => {
  const item = e.target.closest(".calc-item");
  if (!item) return;

  const key = item.dataset.calc;
  if (!CALCULATORS[key]) return;

  ACTIVE_CALCULATOR = key;
  setActiveSidebar(key);

  const calc = CALCULATORS[key];
  titleEl.textContent = calc.title;
  descEl.textContent  = calc.description;

  renderForm(calc);
});

/* ============================================================
   DATA COLLECTION & VALIDATION
============================================================ */

function collectData(calculator) {
  const data = {};

  for (let field of calculator.fields) {
    const el = document.getElementById(field.id);

    if (!el || el.value === "") {
      alert("Please fill all required fields");
      return null;
    }

    if (field.type === "select") {
      data[field.id] = el.value;
    } else {
      const value = Number(el.value);
      if (isNaN(value)) {
        alert("Invalid numeric value");
        return null;
      }
      data[field.id] = value;
    }
  }

  return data;
}

/* ============================================================
   BUTTON EVENTS (CALC / RESET)
============================================================ */

calcBtn.addEventListener("click", () => {
  const calc = CALCULATORS[ACTIVE_CALCULATOR];
  if (!calc) return;

  const data = collectData(calc);
  if (!data) return;

  const output = calc.calculate(data);
  showResult(output);
});

resetBtn.addEventListener("click", () => {
  const calc = CALCULATORS[ACTIVE_CALCULATOR];
  if (!calc) return;
  renderForm(calc);
});

/* ============================================================
   INITIAL RENDER
============================================================ */

document.addEventListener("DOMContentLoaded", () => {
  const initial = CALCULATORS[ACTIVE_CALCULATOR];
  if (!initial) return;

  setActiveSidebar(ACTIVE_CALCULATOR);
  titleEl.textContent = initial.title;
  descEl.textContent  = initial.description;
  renderForm(initial);
});

</script>
<script>
/* ============================================================
   CALCULATORS REGISTRY ‚Äì PART 4 / 5
   (10 ‚Üí 18)
============================================================ */

/* ============================================================
   10. Serum Osmolarity
============================================================ */
CALCULATORS.osm = {
  title: "Serum Osmolarity",
  description: "Calculated serum osmolarity",
  fields: [
    { id: "na", label: "Sodium (mEq/L)", type: "number" },
    { id: "glucose", label: "Glucose (mg/dL)", type: "number" },
    { id: "bun", label: "BUN (mg/dL)", type: "number" }
  ],
  calculate(d) {
    const osm = 2 * d.na + d.glucose / 18 + d.bun / 2.8;
    return `Serum Osmolarity: <b>${osm.toFixed(1)} mOsm/kg</b>`;
  }
};

/* ============================================================
   11. LDL Cholesterol ‚Äì Friedewald
============================================================ */
CALCULATORS.ldl = {
  title: "LDL Cholesterol",
  description: "Friedewald equation",
  fields: [
    { id: "tc", label: "Total Cholesterol (mg/dL)", type: "number" },
    { id: "hdl", label: "HDL (mg/dL)", type: "number" },
    { id: "tg", label: "Triglycerides (mg/dL)", type: "number" }
  ],
  calculate(d) {
    if (d.tg >= 400) {
      return "Friedewald formula is invalid if TG ‚â• 400 mg/dL";
    }
    const ldl = d.tc - d.hdl - d.tg / 5;
    return `LDL: <b>${ldl.toFixed(1)} mg/dL</b>`;
  }
};

/* ============================================================
   12. Child‚ÄìPugh Score
============================================================ */
CALCULATORS.childpugh = {
  title: "Child‚ÄìPugh Score",
  description: "Assessment of liver disease severity",
  fields: [
    { id: "bilirubin", label: "Bilirubin (mg/dL)", type: "number" },
    { id: "albumin", label: "Albumin (g/dL)", type: "number" },
    { id: "inr", label: "INR", type: "number", step: "0.1" },
    {
      id: "ascites",
      label: "Ascites",
      type: "select",
      options: [
        { value: "1", label: "None" },
        { value: "2", label: "Mild" },
        { value: "3", label: "Moderate‚ÄìSevere" }
      ]
    },
    {
      id: "encephalopathy",
      label: "Encephalopathy",
      type: "select",
      options: [
        { value: "1", label: "None" },
        { value: "2", label: "Grade I‚ÄìII" },
        { value: "3", label: "Grade III‚ÄìIV" }
      ]
    }
  ],
  calculate(d) {
    let score = 0;

    score += d.bilirubin < 2 ? 1 : d.bilirubin <= 3 ? 2 : 3;
    score += d.albumin > 3.5 ? 1 : d.albumin >= 2.8 ? 2 : 3;
    score += d.inr < 1.7 ? 1 : d.inr <= 2.3 ? 2 : 3;
    score += Number(d.ascites);
    score += Number(d.encephalopathy);

    let grade = score <= 6 ? "Class A" : score <= 9 ? "Class B" : "Class C";

    return `Child‚ÄìPugh Score: <b>${score}</b><br>${grade}`;
  }
};

/* ============================================================
   13. MELD Score (Simplified)
============================================================ */
CALCULATORS.meld = {
  title: "MELD Score",
  description: "Model for End-Stage Liver Disease",
  fields: [
    { id: "bilirubin", label: "Bilirubin (mg/dL)", type: "number" },
    { id: "inr", label: "INR", type: "number", step: "0.1" },
    { id: "creatinine", label: "Creatinine (mg/dL)", type: "number" }
  ],
  calculate(d) {
    const meld =
      3.78 * Math.log(d.bilirubin) +
      11.2 * Math.log(d.inr) +
      9.57 * Math.log(d.creatinine) +
      6.43;

    return `MELD Score: <b>${Math.round(meld)}</b>`;
  }
};

/* ============================================================
   14. CHA‚ÇÇDS‚ÇÇ-VASc
============================================================ */
CALCULATORS.cha2ds2vasc = {
  title: "CHA‚ÇÇDS‚ÇÇ-VASc Score",
  description: "Stroke risk in atrial fibrillation",
  fields: [
    { id: "score", label: "Total Points", type: "number" }
  ],
  calculate(d) {
    return `CHA‚ÇÇDS‚ÇÇ-VASc Score: <b>${d.score}</b>`;
  }
};

/* ============================================================
   15. CURB-65
============================================================ */
CALCULATORS.curb65 = {
  title: "CURB-65",
  description: "Severity of community-acquired pneumonia",
  fields: [
    { id: "score", label: "Total Points (0‚Äì5)", type: "number" }
  ],
  calculate(d) {
    let risk =
      d.score <= 1 ? "Low risk" :
      d.score <= 2 ? "Moderate risk" :
      "High risk";

    return `CURB-65 Score: <b>${d.score}</b><br>${risk}`;
  }
};

/* ============================================================
   16. Wells Score (DVT / PE)
============================================================ */
CALCULATORS.wells = {
  title: "Wells Score",
  description: "Clinical probability for DVT or PE",
  fields: [
    { id: "score", label: "Total Points", type: "number", step: "0.5" }
  ],
  calculate(d) {
    let prob =
      d.score < 2 ? "Low probability" :
      d.score <= 6 ? "Moderate probability" :
      "High probability";

    return `Wells Score: <b>${d.score}</b><br>${prob}`;
  }
};

/* ============================================================
   17. APACHE II (Simplified)
============================================================ */
CALCULATORS.apache = {
  title: "APACHE II (Simplified)",
  description: "Severity of disease classification",
  fields: [
    { id: "score", label: "Total APACHE II Score", type: "number" }
  ],
  calculate(d) {
    return `APACHE II Score: <b>${d.score}</b>`;
  }
};

/* ============================================================
   18. NIHSS (Simplified)
============================================================ */
CALCULATORS.nihss = {
  title: "NIH Stroke Scale (NIHSS)",
  description: "Neurological deficit severity",
  fields: [
    { id: "score", label: "NIHSS Total Score", type: "number" }
  ],
  calculate(d) {
    let severity =
      d.score <= 4 ? "Minor Stroke" :
      d.score <= 15 ? "Moderate Stroke" :
      d.score <= 20 ? "Moderate‚ÄìSevere Stroke" :
      "Severe Stroke";

    return `NIHSS Score: <b>${d.score}</b><br>${severity}`;
  }
};
</script>
     <script>
/* ============================================================
   FINAL INITIALIZATION ‚Äì PART 5 / 5
============================================================ */

/* ============================================================
   SAFETY CHECKS
============================================================ */

if (typeof CALCULATORS !== "object") {
  console.error("CALCULATORS registry not found");
}

/* ============================================================
   DEFAULT CALCULATOR SETUP
============================================================ */

function initDefaultCalculator() {
  const defaultKey = "bmi";

  if (!CALCULATORS[defaultKey]) {
    console.error("Default calculator missing");
    return;
  }

  ACTIVE_CALCULATOR = defaultKey;

  setActiveSidebar(defaultKey);

  titleEl.textContent = CALCULATORS[defaultKey].title;
  descEl.textContent  = CALCULATORS[defaultKey].description;

  renderForm(CALCULATORS[defaultKey]);
  clearResult();
}

/* ============================================================
   GLOBAL KEYBOARD SUPPORT (ENTER TO CALCULATE)
============================================================ */

document.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    e.preventDefault();
    calcBtn.click();
  }
});

/* ============================================================
   FORM RESET ENHANCEMENT
============================================================ */

resetBtn.addEventListener("click", () => {
  clearResult();
});

/* ============================================================
   RESULT FORMATTING ENHANCEMENT
============================================================ */

const originalShowResult = showResult;

function enhancedShowResult(html) {
  originalShowResult(`
    <div style="font-size:14px;color:#94a3b8;margin-bottom:6px">
      Calculation Result
    </div>
    <div style="font-size:26px;font-weight:700">
      ${html}
    </div>
  `);
}

showResult = enhancedShowResult;

/* ============================================================
   LOAD EVENT
============================================================ */

window.addEventListener("load", () => {
  initDefaultCalculator();
});

/* ============================================================
   END OF FILE
============================================================ */
</script>

</body>
</html>


