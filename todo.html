<!DOCTYPE html>
<html lang="en" data-theme="morning">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Medora | Clinical Task Manager PRO</title>

<!-- ========================= -->
<!-- GOOGLE FONTS -->
<!-- ========================= -->
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

<!-- ========================= -->
<!-- FONT AWESOME -->
<!-- ========================= -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- ========================= -->
<!-- FIREBASE -->
<!-- ========================= -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>

/* ================================================= */
/*                MEDORA DESIGN SYSTEM PRO          */
/* ================================================= */

:root{
--primary:#2563eb;
--secondary:#3b82f6;
--accent:#10b981;
--danger:#ef4444;
--warning:#f59e0b;
--info:#0ea5e9;
--glass:rgba(255,255,255,0.8);
--glass-border:rgba(255,255,255,0.4);
--bg-gradient:linear-gradient(135deg,#e0f2fe,#f8fafc);
--text-main:#1e293b;
--text-muted:#64748b;
--radius:24px;
--shadow-lg:0 25px 60px rgba(0,0,0,0.12);
--shadow-sm:0 10px 25px rgba(0,0,0,0.06);
}

/* ================= ICU MODE ===================== */

[data-theme="icu"]{
--primary:#38bdf8;
--secondary:#818cf8;
--accent:#34d399;
--glass:rgba(15,23,42,0.85);
--glass-border:rgba(51,65,85,0.6);
--bg-gradient:linear-gradient(135deg,#0f172a,#1e293b);
--text-main:#f1f5f9;
--text-muted:#94a3b8;
--shadow-lg:0 25px 60px rgba(0,0,0,0.6);
--shadow-sm:0 10px 25px rgba(0,0,0,0.4);
}

/* ================================================= */
/*                GLOBAL RESET                      */
/* ================================================= */

*{
box-sizing:border-box;
margin:0;
padding:0;
transition:0.3s ease;
}

body{
font-family:'Plus Jakarta Sans',sans-serif;
background:var(--bg-gradient);
color:var(--text-main);
min-height:100vh;
display:flex;
flex-direction:column;
}

/* ================================================= */
/*                HEADER                            */
/* ================================================= */

header{
padding:20px 40px;
display:flex;
justify-content:space-between;
align-items:center;
background:var(--glass);
backdrop-filter:blur(20px);
border-bottom:1px solid var(--glass-border);
position:sticky;
top:0;
z-index:1000;
}

.logo-area{
display:flex;
align-items:center;
gap:15px;
cursor:pointer;
}

.logo-icon{
width:48px;
height:48px;
border-radius:16px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
display:flex;
align-items:center;
justify-content:center;
box-shadow:var(--shadow-sm);
}

.logo-icon svg{
width:28px;
height:28px;
fill:white;
}

.logo-text h1{
font-weight:800;
font-size:22px;
letter-spacing:-0.5px;
background:linear-gradient(to right,var(--primary),var(--secondary));
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

/* ================================================= */
/*                MAIN GRID                         */
/* ================================================= */

.main-wrapper{
max-width:1300px;
margin:40px auto;
width:95%;
display:grid;
grid-template-columns:1fr 380px;
gap:35px;
flex-grow:1;
}

/* ================================================= */
/*                TASK CARD                         */
/* ================================================= */

.task-card{
background:var(--glass);
border-radius:var(--radius);
padding:40px;
box-shadow:var(--shadow-lg);
border:1px solid var(--glass-border);
display:flex;
flex-direction:column;
}

/* ================================================= */
/*                TASK HEADER                       */
/* ================================================= */

.task-header{
margin-bottom:30px;
}

.task-header h2{
font-size:28px;
font-weight:800;
margin-bottom:5px;
}

.task-header p{
color:var(--text-muted);
}

/* ================================================= */
/*                INPUT SECTION                     */
/* ================================================= */

.input-container{
display:flex;
gap:10px;
background:rgba(255,255,255,0.2);
padding:8px;
border-radius:18px;
border:1px solid var(--glass-border);
margin-bottom:25px;
flex-wrap:wrap;
}

.input-container input{
flex:1;
min-width:200px;
padding:14px 18px;
border:none;
background:transparent;
font-size:15px;
outline:none;
color:var(--text-main);
}

.priority-select{
padding:10px 15px;
border-radius:12px;
border:1px solid var(--glass-border);
background:var(--glass);
font-weight:600;
cursor:pointer;
}

.add-btn{
padding:12px 20px;
border:none;
border-radius:12px;
background:var(--primary);
color:white;
font-weight:700;
cursor:pointer;
box-shadow:var(--shadow-sm);
}

.add-btn:hover{
transform:scale(1.05);
}

/* ================================================= */
/*                SEARCH & FILTER                   */
/* ================================================= */

.filter-bar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
flex-wrap:wrap;
gap:10px;
}

.search-box{
display:flex;
align-items:center;
background:rgba(255,255,255,0.2);
padding:8px 12px;
border-radius:12px;
border:1px solid var(--glass-border);
}

.search-box input{
border:none;
background:transparent;
outline:none;
padding-left:8px;
}

.filter-buttons{
display:flex;
gap:8px;
}

.filter-btn{
padding:6px 12px;
border-radius:20px;
border:1px solid var(--glass-border);
background:var(--glass);
font-size:12px;
cursor:pointer;
font-weight:600;
}

.filter-btn.active{
background:var(--primary);
color:white;
}

/* ================================================= */
/*                TASK LIST                         */
/* ================================================= */

.task-list{
list-style:none;
display:flex;
flex-direction:column;
gap:15px;
}

.task-item{
background:var(--glass);
padding:18px 20px;
border-radius:18px;
display:flex;
justify-content:space-between;
align-items:center;
border-left:6px solid var(--primary);
cursor:grab;
}

.task-item.urgent{border-left-color:var(--warning);}
.task-item.emergency{border-left-color:var(--danger);}
.task-item.done{
opacity:0.6;
text-decoration:line-through;
}

/* ================================================= */
/*                SIDEBAR                           */
/* ================================================= */

.sidebar{
display:flex;
flex-direction:column;
gap:25px;
}

.sidebar-card{
background:var(--glass);
padding:30px;
border-radius:var(--radius);
box-shadow:var(--shadow-sm);
border:1px solid var(--glass-border);
text-align:center;
}

/* ================================================= */
/*                PROGRESS CIRCLE                   */
/* ================================================= */

.progress-wrapper{
position:relative;
width:180px;
height:180px;
margin:20px auto;
}

.progress-wrapper svg{
transform:rotate(-90deg);
}

.circle-bg{
fill:none;
stroke:rgba(0,0,0,0.05);
stroke-width:12;
}

.circle-progress{
fill:none;
stroke:var(--primary);
stroke-width:12;
stroke-linecap:round;
stroke-dasharray:440;
stroke-dashoffset:440;
}

.progress-text{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
font-size:32px;
font-weight:800;
color:var(--primary);
}

/* ================================================= */
/*                RESPONSIVE                        */
/* ================================================= */

@media(max-width:1024px){
.main-wrapper{
grid-template-columns:1fr;
}
}

@media(max-width:768px){
header{
padding:15px 20px;
}
.task-card{
padding:25px;
}
}

</style>
</head>
<body>

<header>
<div class="logo-area">
<div class="logo-icon">
<svg viewBox="0 0 24 24">
<path d="M3 12C8 4 16 4 21 12C16 10 11 10 6 12C10 13 13 15 15 19C12 16 8 15 3 12Z"/>
</svg>
</div>
<div class="logo-text">
<h1>MEDORA PRO</h1>
</div>
</div>
</header>

<div class="main-wrapper">
    <!-- ================================================= -->
<!--                TASK SECTION HTML                 -->
<!-- ================================================= -->

<div class="task-card">

<div class="task-header">
<h2>Clinical Rounds & Tasks</h2>
<p>Manage your medical responsibilities with precision.</p>
</div>

<div class="input-container">
<input id="taskInput" type="text" placeholder="Add new clinical task...">
<select id="prioritySelect" class="priority-select">
<option value="routine">Routine</option>
<option value="urgent">Urgent</option>
<option value="emergency">Emergency</option>
</select>
<button id="addBtn" class="add-btn">
<i class="fas fa-plus"></i> Add
</button>
</div>

<div class="filter-bar">
<div class="search-box">
<i class="fas fa-search"></i>
<input type="text" id="searchInput" placeholder="Search tasks...">
</div>

<div class="filter-buttons">
<button class="filter-btn active" data-filter="all">All</button>
<button class="filter-btn" data-filter="routine">Routine</button>
<button class="filter-btn" data-filter="urgent">Urgent</button>
<button class="filter-btn" data-filter="emergency">Emergency</button>
<button class="filter-btn" data-filter="done">Done</button>
</div>
</div>

<ul id="taskList" class="task-list"></ul>

</div>

<!-- ================================================= -->
<!--                SIDEBAR HTML                      -->
<!-- ================================================= -->

<div class="sidebar">

<div class="sidebar-card">
<h3>Completion Rate</h3>
<div class="progress-wrapper">
<svg width="180" height="180">
<circle cx="90" cy="90" r="70" class="circle-bg"/>
<circle cx="90" cy="90" r="70" class="circle-progress" id="progressCircle"/>
</svg>
<div class="progress-text" id="progressText">0%</div>
</div>
<p id="progressSummary">No tasks yet.</p>
</div>

<div class="sidebar-card">
<h4><i class="fas fa-lightbulb"></i> Medical Insight</h4>
<p id="quote">
"The good physician treats the disease; the great physician treats the patient who has the disease."
</p>
</div>

</div>
</div>

<!-- ================================================= -->
<!--                FIREBASE LOGIC                    -->
<!-- ================================================= -->

<script>

const firebaseConfig = {
apiKey: "YOUR_API_KEY",
authDomain: "YOUR_AUTH_DOMAIN",
projectId: "YOUR_PROJECT_ID"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

let userId = null;
let tasks = [];
let currentFilter = "all";

/* ================================================= */
/*                AUTH CHECK                         */
/* ================================================= */

auth.onAuthStateChanged(user=>{
if(!user){
window.location.href="login.html";
return;
}
userId=user.uid;
listenToTasks();
});

/* ================================================= */
/*                ADD TASK                           */
/* ================================================= */

document.getElementById("addBtn").onclick=()=>{
const text=document.getElementById("taskInput").value.trim();
const priority=document.getElementById("prioritySelect").value;

if(!text)return;

db.collection("users")
.doc(userId)
.collection("tasks")
.add({
text,
priority,
completed:false,
timestamp:firebase.firestore.FieldValue.serverTimestamp()
});

document.getElementById("taskInput").value="";
};

/* ================================================= */
/*                REALTIME LISTENER                  */
/* ================================================= */

function listenToTasks(){
db.collection("users")
.doc(userId)
.collection("tasks")
.orderBy("timestamp","desc")
.onSnapshot(snapshot=>{
tasks=[];
snapshot.forEach(doc=>{
tasks.push({id:doc.id,...doc.data()});
});
renderTasks();
updateProgress();
});
}

/* ================================================= */
/*                RENDER TASKS                       */
/* ================================================= */

function renderTasks(){
const list=document.getElementById("taskList");
list.innerHTML="";

let filtered=tasks.filter(task=>{
if(currentFilter==="all")return true;
if(currentFilter==="done")return task.completed;
return task.priority===currentFilter;
});

const searchValue=document.getElementById("searchInput").value.toLowerCase();

filtered=filtered.filter(task=>
task.text.toLowerCase().includes(searchValue)
);

filtered.forEach(task=>{
const li=document.createElement("li");
li.className="task-item "+task.priority+(task.completed?" done":"");
li.draggable=true;

li.innerHTML=`
<div>
<strong>${task.text}</strong><br>
<small>${task.priority.toUpperCase()}</small>
</div>

<div>
<button onclick="toggleTask('${task.id}',${task.completed})">
<i class="fas fa-check"></i>
</button>
<button onclick="deleteTask('${task.id}')">
<i class="fas fa-trash"></i>
</button>
</div>
`;

addDragEvents(li,task.id);
list.appendChild(li);
});
}

/* ================================================= */
/*                TOGGLE TASK                        */
/* ================================================= */

function toggleTask(id,current){
db.collection("users")
.doc(userId)
.collection("tasks")
.doc(id)
.update({completed:!current});
}

/* ================================================= */
/*                DELETE TASK                        */
/* ================================================= */

function deleteTask(id){
db.collection("users")
.doc(userId)
.collection("tasks")
.doc(id)
.delete();
}

/* ================================================= */
/*                FILTER BUTTONS                     */
/* ================================================= */

document.querySelectorAll(".filter-btn").forEach(btn=>{
btn.onclick=()=>{
document.querySelectorAll(".filter-btn").forEach(b=>b.classList.remove("active"));
btn.classList.add("active");
currentFilter=btn.dataset.filter;
renderTasks();
};
});

/* ================================================= */
/*                SEARCH                             */
/* ================================================= */

document.getElementById("searchInput").addEventListener("input",renderTasks);

/* ================================================= */
/*                PROGRESS UPDATE                    */
/* ================================================= */

function updateProgress(){
const total=tasks.length;
const done=tasks.filter(t=>t.completed).length;
const percent=total?Math.round((done/total)*100):0;

document.getElementById("progressText").innerText=percent+"%";
document.getElementById("progressSummary").innerText=
`${done} of ${total} tasks completed.`;

const offset=440-(440*percent)/100;
document.getElementById("progressCircle").style.strokeDashoffset=offset;
}

/* ================================================= */
/*                DRAG & DROP                        */
/* ================================================= */

function addDragEvents(element,id){
element.addEventListener("dragstart",()=>{
element.classList.add("dragging");
});

element.addEventListener("dragend",()=>{
element.classList.remove("dragging");
});
}

</script>

</body>
</html>

