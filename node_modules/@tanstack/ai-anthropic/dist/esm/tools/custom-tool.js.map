{"version":3,"file":"custom-tool.js","sources":["../../../src/tools/custom-tool.ts"],"sourcesContent":["import type { JSONSchema, SchemaInput, Tool } from '@tanstack/ai'\nimport type { CacheControl } from '../text/text-provider-options'\n\nexport interface CustomTool {\n  /**\n   * The name of the tool.\n   */\n  name: string\n  type: 'custom'\n  /**\n   * A brief description of what the tool does. Tool descriptions should be as detailed as possible. The more information that the model has about what the tool is and how to use it, the better it will perform. You can use natural language descriptions to reinforce important aspects of the tool input JSON schema.\n   */\n  description: string\n  /**\n   * This defines the shape of the input that your tool accepts and that the model will produce.\n   */\n  input_schema: {\n    type: 'object'\n    properties: Record<string, any> | null\n    required?: Array<string> | null\n  }\n\n  cache_control?: CacheControl | null\n}\n\nexport function convertCustomToolToAdapterFormat(tool: Tool): CustomTool {\n  const metadata =\n    (tool.metadata as { cacheControl?: CacheControl | null } | undefined) || {}\n\n  // Tool schemas are already converted to JSON Schema in the ai layer\n  const jsonSchema = (tool.inputSchema ?? {\n    type: 'object',\n    properties: {},\n    required: [],\n  }) as JSONSchema\n\n  const inputSchema = {\n    type: 'object' as const,\n    properties: jsonSchema.properties || null,\n    required: jsonSchema.required || null,\n  }\n\n  return {\n    name: tool.name,\n    type: 'custom',\n    description: tool.description,\n    input_schema: inputSchema,\n    cache_control: metadata.cacheControl || null,\n  }\n}\n\nexport function customTool(\n  name: string,\n  description: string,\n  inputSchema: SchemaInput,\n  cacheControl?: CacheControl | null,\n): Tool {\n  return {\n    name,\n    description,\n    inputSchema,\n    metadata: {\n      cacheControl,\n    },\n  }\n}\n"],"names":[],"mappings":"AAyBO,SAAS,iCAAiC,MAAwB;AACvE,QAAM,WACH,KAAK,YAAmE,CAAA;AAG3E,QAAM,aAAc,KAAK,eAAe;AAAA,IAEtC,YAAY,CAAA;AAAA,IACZ,UAAU,CAAA;AAAA,EAAC;AAGb,QAAM,cAAc;AAAA,IAClB,MAAM;AAAA,IACN,YAAY,WAAW,cAAc;AAAA,IACrC,UAAU,WAAW,YAAY;AAAA,EAAA;AAGnC,SAAO;AAAA,IACL,MAAM,KAAK;AAAA,IACX,MAAM;AAAA,IACN,aAAa,KAAK;AAAA,IAClB,cAAc;AAAA,IACd,eAAe,SAAS,gBAAgB;AAAA,EAAA;AAE5C;"}