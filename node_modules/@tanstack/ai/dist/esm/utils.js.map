{"version":3,"file":"utils.js","sources":["../../src/utils.ts"],"sourcesContent":["/**\n * Detect image mime type from base64 data using magic bytes.\n * Returns undefined if the format cannot be detected.\n *\n * This function analyzes the first few bytes of base64-encoded image data\n * to determine the image format based on file signature (magic bytes).\n *\n * @param base64Data - The base64-encoded image data\n * @returns The detected mime type, or undefined if unrecognized\n *\n * @example\n * ```ts\n * const mimeType = detectImageMimeType(imageBase64)\n * // Returns 'image/jpeg', 'image/png', 'image/gif', 'image/webp', or undefined\n * ```\n */\nexport function detectImageMimeType(\n  base64Data: string,\n): 'image/jpeg' | 'image/png' | 'image/gif' | 'image/webp' | undefined {\n  // Get first few bytes (base64 encoded)\n  const prefix = base64Data.substring(0, 20)\n\n  // JPEG: starts with /9j/ (FFD8FF in base64)\n  if (prefix.startsWith('/9j/')) {\n    return 'image/jpeg'\n  }\n  // PNG: starts with iVBORw0KGgo (89504E47 in base64)\n  if (prefix.startsWith('iVBORw0KGgo')) {\n    return 'image/png'\n  }\n  // GIF: starts with R0lGOD (474946 in base64)\n  if (prefix.startsWith('R0lGOD')) {\n    return 'image/gif'\n  }\n  // WebP: starts with UklGR (52494646 in base64, followed by WEBP)\n  if (prefix.startsWith('UklGR')) {\n    return 'image/webp'\n  }\n\n  return undefined\n}\n"],"names":[],"mappings":"AAgBO,SAAS,oBACd,YACqE;AAErE,QAAM,SAAS,WAAW,UAAU,GAAG,EAAE;AAGzC,MAAI,OAAO,WAAW,MAAM,GAAG;AAC7B,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,WAAW,aAAa,GAAG;AACpC,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,WAAW,QAAQ,GAAG;AAC/B,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,WAAW,OAAO,GAAG;AAC9B,WAAO;AAAA,EACT;AAEA,SAAO;AACT;"}